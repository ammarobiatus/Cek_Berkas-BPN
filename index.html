<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cek Berkas Pengukuran | Gercep Kota Bitung</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        scroll-behavior: smooth;
      }
      .step-line {
        height: 2px;
        background-color: #e5e7eb;
        flex-grow: 1;
        margin: 0 10px;
      }
      .step-line.active {
        background-color: #0056b3;
      }
      /* Custom Blue for PRD */
      .bg-primary-blue {
        background-color: #0056b3;
      }
      .text-primary-blue {
        color: #0056b3;
      }
      .border-primary-blue {
        border-color: #0056b3;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <header class="bg-white border-b sticky top-0 z-50">
      <div
        class="container mx-auto px-6 py-4 flex justify-between items-center"
      >
        <div class="flex items-center space-x-2">
          <i data-lucide="map-pin" class="text-primary-blue w-8 h-8"></i>
          <span class="font-bold text-2xl tracking-tight text-primary-blue"
            >Cek Berkas</span
          >
        </div>
        <nav class="hidden md:flex space-x-8 font-medium">
          <a href="#" class="hover:text-primary-blue transition">Home</a>
          <a href="#cara-cek" class="hover:text-primary-blue transition"
            >Cara Cek</a
          >
          <a href="#bantuan" class="hover:text-primary-blue transition"
            >Bantuan</a
          >
        </nav>
      </div>
    </header>

    <section class="bg-primary-blue text-white py-20 px-6">
      <div class="container mx-auto text-center max-w-4xl">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">
          Lacak Berkas Pengukuran Anda
        </h1>
        <p class="text-lg md:text-xl opacity-90 mb-10">
          Layanan transparansi untuk melacak posisi berkas, petugas ukur, hingga
          kendala lapangan secara real-time.
        </p>

        <div
          class="bg-white p-2 rounded-full shadow-2xl flex flex-col md:flex-row max-w-2xl mx-auto overflow-hidden"
        >
          <input
            id="berkasInput"
            type="text"
            placeholder="Masukkan Nomor Berkas (Contoh: 123/2024)"
            class="flex-grow px-6 py-4 text-gray-700 outline-none rounded-full"
          />
          <button
            onclick="handleSearch()"
            id="btnCari"
            class="bg-primary-blue hover:bg-blue-700 text-white px-8 py-4 rounded-full font-bold transition flex items-center justify-center space-x-2"
          >
            <i data-lucide="search" class="w-5 h-5"></i>
            <span>Cari Berkas</span>
          </button>
        </div>
        <p id="errorText" class="text-red-300 mt-4 text-sm hidden">
          Nomor berkas tidak ditemukan atau salah input.
        </p>
      </div>
    </section>

    <section id="resultSection" class="py-16 px-6 bg-white hidden">
      <div class="container mx-auto max-w-5xl border rounded-2xl p-8 shadow-sm">
        <div
          class="flex flex-col md:flex-row justify-between items-start mb-10 border-b pb-6"
        >
          <div>
            <h2
              class="text-xs font-semibold uppercase tracking-wider text-gray-400"
            >
              Nama Pemohon
            </h2>
            <p id="displayNama" class="text-2xl font-bold text-primary-blue">
              -
            </p>
            <p id="displayNomor" class="text-sm text-gray-400 mt-1 italic"></p>
          </div>
          <div
            class="mt-4 md:mt-0 p-4 bg-blue-50 rounded-xl border border-blue-100 text-left md:text-right"
          >
            <p class="text-xs text-gray-500 uppercase">
              Posisi Berkas Saat Ini:
            </p>
            <p id="displayPosisi" class="text-lg font-bold text-blue-800">-</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
          <div class="bg-gray-50 p-4 rounded-lg">
            <p class="text-xs text-gray-400 font-bold uppercase">Kelurahan</p>
            <p id="displayKelurahan" class="font-semibold">-</p>
          </div>
          <div class="bg-gray-50 p-4 rounded-lg">
            <p class="text-xs text-gray-400 font-bold uppercase">
              Jenis Layanan
            </p>
            <p id="displayLayanan" class="font-semibold">-</p>
          </div>
          <div class="bg-gray-50 p-4 rounded-lg">
            <p class="text-xs text-gray-400 font-bold uppercase">
              Estimasi Selesai
            </p>
            <p id="displayEstimasi" class="font-semibold text-orange-600">-</p>
          </div>
        </div>

        <div
          class="flex flex-col md:flex-row items-center justify-between space-y-8 md:space-y-0 relative mb-12"
        >
          <div class="flex flex-col items-center text-center w-full md:w-1/3">
            <div
              class="w-12 h-12 rounded-full border-4 flex items-center justify-center bg-primary-blue border-primary-blue text-white mb-3"
            >
              <i data-lucide="clipboard-check" class="w-6 h-6"></i>
            </div>
            <h3 class="font-bold text-sm">Pendaftaran</h3>
            <p class="text-[10px] text-gray-500">Berkas Diterima</p>
          </div>

          <div class="hidden md:block step-line active"></div>

          <div class="flex flex-col items-center text-center w-full md:w-1/3">
            <div
              id="iconUkur"
              class="w-12 h-12 rounded-full border-4 flex items-center justify-center border-gray-200 text-gray-300 mb-3"
            >
              <i data-lucide="map" class="w-6 h-6"></i>
            </div>
            <h3 class="font-bold text-sm">Jadwal Pengukuran</h3>
            <p id="tglUkur" class="text-[10px] text-gray-500">-</p>
          </div>

          <div id="line2" class="hidden md:block step-line"></div>

          <div class="flex flex-col items-center text-center w-full md:w-1/3">
            <div
              id="iconSelesai"
              class="w-12 h-12 rounded-full border-4 flex items-center justify-center border-gray-200 text-gray-300 mb-3"
            >
              <i data-lucide="check-circle" class="w-6 h-6"></i>
            </div>
            <h3 class="font-bold text-sm text-gray-400">Hasil Akhir</h3>
            <p id="displayHasil" class="text-[10px] text-gray-400">-</p>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="border rounded-xl p-5 bg-white">
            <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
              <i data-lucide="user" class="w-4 h-4 text-blue-600"></i> Informasi
              Petugas
            </h4>
            <div class="text-sm space-y-3">
              <div class="flex justify-between border-b pb-2">
                <span class="text-gray-500">Petugas Ukur:</span>
                <span id="displayPetugas" class="font-bold">-</span>
              </div>
              <div class="flex justify-between border-b pb-2">
                <span class="text-gray-500">Kontak Petugas:</span>
                <span id="displayKontakPetugas" class="font-bold text-blue-600"
                  >-</span
                >
              </div>
              <div class="flex justify-between border-b pb-2">
                <span class="text-gray-500">Petugas Terakhir:</span>
                <span id="displayPetugasTerakhir" class="font-medium">-</span>
              </div>
            </div>
          </div>

          <div class="border rounded-xl p-5 bg-red-50 border-red-100">
            <h4 class="font-bold text-red-800 mb-4 flex items-center gap-2">
              <i data-lucide="alert-circle" class="w-4 h-4 text-red-600"></i>
              Kendala & Tindak Lanjut
            </h4>
            <div class="text-sm space-y-3">
              <div>
                <p class="text-red-700 font-bold mb-1">Kendala:</p>
                <p id="displayKendala" class="text-gray-700 italic">
                  Tidak ada kendala
                </p>
              </div>
              <div>
                <p class="text-gray-800 font-bold mb-1">Tindak Lanjut:</p>
                <p id="displayTindakLanjut" class="text-gray-700">-</p>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8 pt-6 border-t text-center">
          <p class="text-[10px] text-gray-400">
            Titik Koordinat: <span id="displayKoordinat">-</span>
          </p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer id="bantuan" class="bg-gray-900 text-gray-400 py-12 px-6">
        <div class="container mx-auto max-w-6xl">
            <div class="grid md:grid-cols-3 gap-12 mb-10 border-b border-gray-800 pb-10">
                <div>
                    <div class="flex items-center space-x-2 mb-6">
                        <i data-lucide="map-pin" class="text-white w-6 h-6"></i>
                        <span class="font-bold text-xl text-white">Cek Berkas</span>
                    </div>
                    <p class="text-sm leading-relaxed">
                        Platform resmi digitalisasi layanan pengukuran tanah untuk memudahkan masyarakat dalam memantau kemajuan berkas mereka secara mandiri.
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6 text-lg">Hubungi Kami</h4>
                    <p class="text-sm flex items-center space-x-2 mb-2">
                        <i data-lucide="phone" class="w-4 h-4 text-primary-blue"></i>
                        <span>(021) 1234-5678</span>
                    </p>
                    <p class="text-sm flex items-center space-x-2">
                        <i data-lucide="mail" class="w-4 h-4 text-primary-blue"></i>
                        <span>info@cekberkas.go.id</span>
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6 text-lg">Media Sosial</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="hover:text-white transition"><i data-lucide="facebook"></i></a>
                        <a href="#" class="hover:text-white transition"><i data-lucide="twitter"></i></a>
                        <a href="#" class="hover:text-white transition"><i data-lucide="instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center text-xs">
                &copy; 2024 Cek Berkas Pengukuran. Hak Cipta Dilindungi Undang-Undang.
            </div>
        </div>
    </footer>
  <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/6281912169081" target="_blank" class="fixed bottom-8 right-8 bg-[#25D366] text-white p-4 rounded-full shadow-lg hover:scale-110 transition duration-300 flex items-center space-x-2 z-50">
        <i data-lucide="phone"></i>
        <span class="font-bold hidden md:inline">CS (WhatsApp)</span>
    </a>
    <script>
      // Inisialisasi Icon
      lucide.createIcons();

      // GANTI INI DENGAN URL API SHEETY KAMU
      const API_URL =
        "https://api.sheety.co/faa1bfb669e83efa1c804947c1197ed9/gercepKotaBitung/sheet7";

      async function handleSearch() {
        const inputVal = document.getElementById("berkasInput").value.trim();
        const btn = document.getElementById("btnCari");
        const errorText = document.getElementById("errorText");
        const resultSection = document.getElementById("resultSection");

        if (!inputVal) return;

        // Loading state
        btn.innerHTML = "Mencari...";
        btn.disabled = true;

        try {
          const response = await fetch(API_URL);
          const json = await response.json();
          const data = json.sheet7;

          // Cari data berdasarkan kolom NO. BERKAS (di JS jadi noBerkas)
          const findData = data.find(
            (item) => String(item.noBerkas) === inputVal,
          );

          if (findData) {
            errorText.classList.add("hidden");
            resultSection.classList.remove("hidden");

            // Isi Data ke HTML
            document.getElementById("displayNama").textContent =
              findData.namaPemohon || "-";
            document.getElementById("displayNomor").textContent =
              "No. Berkas: " + findData.noBerkas;
            document.getElementById("displayKelurahan").textContent =
              findData.kelurahan || "-";
            document.getElementById("displayLayanan").textContent =
              findData.jenisLayanan || "-";
            document.getElementById("displayPosisi").textContent =
              findData.posisiBerkas || "Sedang Diproses";
            document.getElementById("displayEstimasi").textContent =
              findData.estimasiBerkasSelesaiDiSeksiPengukuran || "-";

            document.getElementById("displayPetugas").textContent =
              findData.namaPetugasUkur || "Belum Ditentukan";
            document.getElementById("displayKontakPetugas").textContent =
              findData.kontakPetugasUkur || "-";
            document.getElementById("displayPetugasTerakhir").textContent =
              findData.petugasTerakhir || "-";

            document.getElementById("displayKendala").textContent =
              findData.kendala || "Tidak ada kendala";
            document.getElementById("displayTindakLanjut").textContent =
              findData.tindakLanjut || "-";
            document.getElementById("displayKoordinat").textContent =
              findData.titikKoordinat || "-";

            // Timeline
            document.getElementById("tglUkur").textContent =
              findData.jadwalPengukuran || "Belum Terjadwal";
            document.getElementById("displayHasil").textContent =
              findData.hasilAkhir || "Belum Terbit";

            // Reset Timeline Icons
            resetIcons();

            // Update Timeline Icons jika data tersedia
            if (findData.jadwalPengukuran) {
              const iconUkur = document.getElementById("iconUkur");
              iconUkur.classList.remove("border-gray-200", "text-gray-300");
              iconUkur.classList.add(
                "bg-primary-blue",
                "text-white",
                "border-primary-blue",
              );
              document.getElementById("line2").classList.add("active");
            }

            if (findData.hasilAkhir) {
              const iconSelesai = document.getElementById("iconSelesai");
              iconSelesai.classList.remove("border-gray-200", "text-gray-300");
              iconSelesai.classList.add(
                "bg-green-600",
                "text-white",
                "border-green-600",
              );
            }

            resultSection.scrollIntoView({ behavior: "smooth" });
          } else {
            errorText.classList.remove("hidden");
            resultSection.classList.add("hidden");
          }
        } catch (error) {
          console.error("Error:", error);
          alert("Gagal mengambil data. Periksa koneksi atau URL API.");
        } finally {
          btn.innerHTML = `<i data-lucide="search" class="w-5 h-5"></i><span>Cari Berkas</span>`;
          btn.disabled = false;
          lucide.createIcons();
        }
      }

      function resetIcons() {
        const iconUkur = document.getElementById("iconUkur");
        const iconSelesai = document.getElementById("iconSelesai");
        const line2 = document.getElementById("line2");

        iconUkur.className =
          "w-12 h-12 rounded-full border-4 flex items-center justify-center border-gray-200 text-gray-300 mb-3";
        iconSelesai.className =
          "w-12 h-12 rounded-full border-4 flex items-center justify-center border-gray-200 text-gray-300 mb-3";
        line2.classList.remove("active");
      }

      // Support Enter Key
      document
        .getElementById("berkasInput")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") handleSearch();
        });
    </script>
  </body>
</html>
